# Helios ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ: êµ¬í˜„ ê³„íšì„œ

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

**í”„ë¡œì íŠ¸**: Helios - Claude Max ê¸°ë°˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ
**ê¸°ë°˜ PRD**: `[KFP] Claude Max ê¸°ë°˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ ë§ˆìŠ¤í„°í”Œëœ.pdf`
**ê¸°ì¡´ ì‹œìŠ¤í…œ**: NERDX Phase 3B AutoDev System
**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 25ì¼
**ë²„ì „**: 1.0.0

---

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ

ê¸°ì¡´ AutoDev ì‹œìŠ¤í…œì„ **Claude Max ìš”ê¸ˆì œì— ìµœì í™”**ëœ Helios ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œìœ¼ë¡œ í™•ì¥:

### í•µì‹¬ ì°¨ë³„ì 

| êµ¬ë¶„ | ê¸°ì¡´ AutoDev | Helios ì‹œìŠ¤í…œ |
|-----|-------------|--------------|
| **API ì‚¬ìš©ëŸ‰ ê´€ë¦¬** | ë‹¨ìˆœ ì‚¬ìš© | 5ì‹œê°„ ì°½ ì˜ˆì‚° ê´€ë¦¬ |
| **ëª¨ë¸ ì„ íƒ** | ê³ ì • (Claude/Gemini) | ë™ì  ê²½ì œì  ë¼ìš°íŒ… |
| **ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬** | ê¸°ë³¸ | ìµœì†Œ ì‹¤í–‰ ê°€ëŠ¥ ì»¨í…ìŠ¤íŠ¸ |
| **ìºì‹±** | ì—†ìŒ | L1/L2/L3 ë‹¤ì¸µ ìºì‹± |
| **ìŠ¤ì¼€ì¤„ë§** | ë‹¨ìˆœ í | Rate-Aware í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤ì¼€ì¤„ë§ |
| **ë³‘ë ¬í™”** | ì œí•œì  | 10+ í”„ë¡œì íŠ¸ ë™ì‹œ ì‹¤í–‰ |

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ í™•ì¥ ì„¤ê³„

### 1. ê¸°ì¡´ AutoDev ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     AutoDev Orchestrator                 â”‚
â”‚  - Workflow Management                   â”‚
â”‚  - Task Coordination                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚  PRD   â”‚       â”‚  QA    â”‚
â”‚ Agent  â”‚â—„â”€â”€â”€â”€â”€â”€â”¤ Agent  â”‚
â”‚(Gemini)â”‚       â”‚(Hybrid)â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â–²â”€â”€â”€â”€â”˜
    â”‚                â”‚
    â”‚           â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚           â”‚  Code   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Agent  â”‚
                â”‚(Claude) â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Helios í™•ì¥ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          HELIOS ORCHESTRATOR (Enhanced)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ¯ RESOURCE GOVERNOR                                â”‚ â”‚
â”‚  â”‚  - 5ì‹œê°„ ì°½ ì˜ˆì‚° ì¶”ì                                  â”‚ â”‚
â”‚  â”‚  - ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ (Opus/Sonnet)                     â”‚ â”‚
â”‚  â”‚  - ë™ì  ìŠ¤ë¡œí‹€ë§                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ’° ECONOMIC ROUTER                                  â”‚ â”‚
â”‚  â”‚  - ì‘ì—…ë³„ ë¹„ìš©-í¸ìµ ë¶„ì„                              â”‚ â”‚
â”‚  â”‚  - Opus/Sonnet ë™ì  ì„ íƒ                             â”‚ â”‚
â”‚  â”‚  - ì‘ì—… ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ë¼ìš°íŒ…                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“Š HYBRID SCHEDULER                                 â”‚ â”‚
â”‚  â”‚  - ì‘ì—… ì¢…ì†ì„± DAG ê´€ë¦¬                               â”‚ â”‚
â”‚  â”‚  - ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§                             â”‚ â”‚
â”‚  â”‚  - 10+ í”„ë¡œì íŠ¸ ë³‘ë ¬ ì‹¤í–‰                             â”‚ â”‚
â”‚  â”‚  - ìì› ê°€ìš©ì„± ê³ ë ¤                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Architect    â”‚  â”‚    Coder    â”‚  â”‚   Reviewer  â”‚
â”‚   Agent       â”‚  â”‚    Agent    â”‚  â”‚    Agent    â”‚
â”‚  (Opus ìš°ì„ )  â”‚  â”‚(Sonnet ê¸°ë³¸)â”‚  â”‚  (Opus ìš°ì„ )â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   SHARED CONTEXT & MEMORY BUS     â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚  L1: Claude Prompt Cache   â”‚   â”‚
        â”‚  â”‚  L2: Exact Match Cache     â”‚   â”‚
        â”‚  â”‚  L3: Semantic Cache (RAG)  â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚  Vector DB (Pinecone)      â”‚   â”‚
        â”‚  â”‚  Redis (State Management)  â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë°˜ ì¸í”„ë¼ êµ¬ì¶• (Week 1-2)

#### 1.1 Resource Governor êµ¬í˜„

**íŒŒì¼**: `services/orchestrator/resource_governor.py`

```python
class ResourceGovernor:
    """
    Claude Max ì‚¬ìš©ëŸ‰ ì˜ˆì‚° ê´€ë¦¬ì

    - 5ì‹œê°„ ì°½ ë‚´ í† í° ì‚¬ìš©ëŸ‰ ì¶”ì 
    - Opus/Sonnet ì‚¬ìš© ë¹„ìœ¨ ëª¨ë‹ˆí„°ë§
    - ë™ì  ìŠ¤ë¡œí‹€ë§ (ì˜ˆì‚° 80% ë„ë‹¬ ì‹œ)
    """

    def __init__(self):
        self.window_duration = 5 * 60 * 60  # 5 hours
        self.max_capacity = 900  # ì„¸ì…˜ë‹¹ ì•½ 900 ë©”ì‹œì§€
        self.opus_limit_pct = 0.50  # Opus 50% ì œí•œ

    async def track_usage(self, model: str, tokens: int) -> UsageMetrics:
        """ì‚¬ìš©ëŸ‰ ì¶”ì """

    async def check_budget(self) -> BudgetStatus:
        """í˜„ì¬ ì˜ˆì‚° ìƒíƒœ í™•ì¸"""

    async def should_throttle(self) -> bool:
        """ìŠ¤ë¡œí‹€ë§ í•„ìš” ì—¬ë¶€"""
```

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­**:
- Redisì— 5ì‹œê°„ ì°½ ì‚¬ìš©ëŸ‰ ì €ì¥
- Opus/Sonnet ë³„ë„ ì¶”ì 
- ì‹¤ì‹œê°„ ì˜ˆì‚° ìƒíƒœ API

#### 1.2 Economic Router êµ¬í˜„

**íŒŒì¼**: `services/orchestrator/economic_router.py`

```python
class EconomicRouter:
    """
    ì‘ì—…ë³„ ëª¨ë¸ ì„ íƒ ê²½ì œì  ë¼ìš°í„°

    Rules:
    - Architectural reasoning â†’ Opus
    - Boilerplate code â†’ Sonnet
    - Code review â†’ Opus
    - Unit test generation â†’ Sonnet
    """

    TASK_MODEL_MAP = {
        'architectural_reasoning': 'opus',
        'high_level_planning': 'opus',
        'code_review': 'opus',
        'boilerplate_generation': 'sonnet',
        'unit_test': 'sonnet',
        'refactoring': 'sonnet',
    }

    async def route_task(
        self,
        task: Task,
        budget_status: BudgetStatus
    ) -> Model:
        """ì‘ì—…ì„ ì ì ˆí•œ ëª¨ë¸ë¡œ ë¼ìš°íŒ…"""

        # Cost-benefit analysis
        task_type = task.metadata.get('task_type')
        recommended_model = self.TASK_MODEL_MAP.get(task_type, 'sonnet')

        # Budget constraint
        if budget_status.opus_budget_pct > 80:
            # Opus ì˜ˆì‚° ë¶€ì¡± ì‹œ Sonnetìœ¼ë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ
            return 'sonnet'

        return recommended_model
```

#### 1.3 Hybrid Scheduler êµ¬í˜„

**íŒŒì¼**: `services/orchestrator/hybrid_scheduler.py`

```python
class HybridScheduler:
    """
    í•˜ì´ë¸Œë¦¬ë“œ ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬

    ê³ ë ¤ ìš”ì†Œ:
    1. ì‘ì—… ì¢…ì†ì„± (DAG)
    2. ìì› ê°€ìš©ì„± (ì˜ˆì‚°)
    3. ì‘ì—… ìš°ì„ ìˆœìœ„
    4. ë³‘ë ¬ì„± (ë…ë¦½ ì‘ì—…)
    """

    async def schedule_tasks(
        self,
        task_graph: DAG,
        priorities: Dict[str, int],
        budget: BudgetStatus
    ) -> ExecutionPlan:
        """ì‘ì—… ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜"""

        # 1. ìœ„ìƒ ì •ë ¬ (Topological Sort)
        sorted_tasks = self.topological_sort(task_graph)

        # 2. ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥ ì‘ì—… ì‹ë³„
        parallel_groups = self.identify_parallel_tasks(task_graph)

        # 3. ìš°ì„ ìˆœìœ„ ë° ì˜ˆì‚° ê³ ë ¤ ìŠ¤ì¼€ì¤„ë§
        execution_plan = self.optimize_schedule(
            parallel_groups,
            priorities,
            budget
        )

        return execution_plan
```

---

### Phase 2: ìºì‹± ì‹œìŠ¤í…œ êµ¬ì¶• (Week 3)

#### 2.1 ë‹¤ì¸µ ìºì‹± ì•„í‚¤í…ì²˜

**íŒŒì¼**: `services/cache/multi_layer_cache.py`

```python
class MultiLayerCache:
    """
    L1: Claude Native Prompt Cache
    L2: Exact Match Cache (Redis)
    L3: Semantic Cache (Vector DB)
    """

    def __init__(self):
        self.l1_cache = ClaudePromptCache()
        self.l2_cache = RedisExactCache()
        self.l3_cache = SemanticCache(vector_db=pinecone_client)

    async def get(self, key: str, context: str) -> Optional[CacheHit]:
        """ìºì‹œ ì¡°íšŒ (L1 â†’ L2 â†’ L3)"""

        # L1: Claude Prompt Cache (90% ë¹„ìš© ì ˆê°)
        if result := await self.l1_cache.get(key):
            return CacheHit(level='L1', data=result)

        # L2: Exact Match (Redis)
        if result := await self.l2_cache.get(key):
            return CacheHit(level='L2', data=result)

        # L3: Semantic Match (Vector DB)
        if result := await self.l3_cache.semantic_search(context):
            return CacheHit(level='L3', data=result)

        return None
```

#### 2.2 í”„ë¡¬í”„íŠ¸ ì••ì¶• ëª¨ë“ˆ

**íŒŒì¼**: `services/optimization/prompt_compressor.py`

```python
from llmlingua import PromptCompressor

class HeliosPromptCompressor:
    """
    LLMLingua ê¸°ë°˜ í”„ë¡¬í”„íŠ¸ ì••ì¶•

    - ìµœëŒ€ 20ë°° ì••ì¶•
    - ë¹„ìš© ë° ì§€ì—° ì‹œê°„ ê°ì†Œ
    """

    def __init__(self):
        self.compressor = PromptCompressor()

    async def compress(
        self,
        prompt: str,
        target_length: Optional[int] = None
    ) -> CompressedPrompt:
        """í”„ë¡¬í”„íŠ¸ ì••ì¶•"""

        compressed = self.compressor.compress_prompt(
            prompt,
            target_token=target_length,
            condition_compare=True,
            reorder_context="sort"
        )

        return CompressedPrompt(
            original=prompt,
            compressed=compressed['compressed_prompt'],
            compression_ratio=len(prompt) / len(compressed['compressed_prompt'])
        )
```

---

### Phase 3: ì „ë¬¸ ì—ì´ì „íŠ¸ í™•ì¥ (Week 4-5)

#### 3.1 ArchitectAgent (Opus ì „ìš©)

**íŒŒì¼**: `services/agents/architect_agent.py`

```python
class ArchitectAgent(BaseAgent):
    """
    ê³ ìˆ˜ì¤€ ì•„í‚¤í…ì²˜ ì„¤ê³„ ì—ì´ì „íŠ¸

    Model: Claude Opus (ë³µì¡í•œ ì¶”ë¡  í•„ìš”)
    Tasks:
    - í”„ë¡œì íŠ¸ ê³„íš ë¶„í•´
    - DAG ìƒì„±
    - ì˜ì¡´ì„± ë¶„ì„
    """

    def __init__(self):
        super().__init__(
            agent_id="architect-001",
            primary_model="opus",
            task_types=["architectural_reasoning", "planning"]
        )

    async def decompose_project(
        self,
        prd: PRD
    ) -> TaskGraph:
        """í”„ë¡œì íŠ¸ë¥¼ ì‘ì—… DAGë¡œ ë¶„í•´"""

        prompt = self._build_decomposition_prompt(prd)

        response = await self.claude_client.messages.create(
            model="claude-opus-4",
            messages=[{"role": "user", "content": prompt}],
            system="You are an expert software architect..."
        )

        task_graph = self._parse_task_graph(response.content)
        return task_graph
```

#### 3.2 Code AnalysisAgent (Sonnet)

**íŒŒì¼**: `services/agents/code_analysis_agent.py`

```python
class CodeAnalysisAgent(BaseAgent):
    """
    ì½”ë“œë² ì´ìŠ¤ ë¶„ì„ ì—ì´ì „íŠ¸

    Model: Claude Sonnet (ëŒ€ê·œëª¨ ì»¨í…ìŠ¤íŠ¸ ê²€ìƒ‰)
    Tasks:
    - ì¢…ì†ì„± ê·¸ë˜í”„ êµ¬ì¶•
    - ì½”ë“œ ê²€ìƒ‰
    - ì˜í–¥ ë¶„ì„
    """

    def __init__(self):
        super().__init__(
            agent_id="codeanalysis-001",
            primary_model="sonnet",
            tools=[StaticAnalysisTool(), DependencyGraphTool()]
        )

    async def build_dependency_graph(
        self,
        codebase_path: str
    ) -> DependencyGraph:
        """ì†Œí”„íŠ¸ì›¨ì–´ ì¢…ì†ì„± ê·¸ë˜í”„ ìƒì„±"""

        # Static analysis
        graph = await self.tools['static_analysis'].analyze(codebase_path)
        return graph
```

#### 3.3 CoderAgent (Sonnet ê¸°ë³¸, Opus ì„ íƒì )

**íŒŒì¼**: `services/agents/coder_agent.py` (ê¸°ì¡´ í™•ì¥)

```python
class CoderAgent(BaseAgent):
    """
    ì½”ë“œ êµ¬í˜„ ì—ì´ì „íŠ¸ (Enhanced)

    Model: Sonnet (ê¸°ë³¸), Opus (ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜)
    Features:
    - ì»¨í…ìŠ¤íŠ¸ ê²©ë¦¬
    - ìµœì†Œ ì‹¤í–‰ ê°€ëŠ¥ ì»¨í…ìŠ¤íŠ¸ ë¡œë”©
    """

    async def implement_task(
        self,
        task: Task,
        context: MinimalContext  # RAGë¡œ ìµœì†Œí™”ëœ ì»¨í…ìŠ¤íŠ¸
    ) -> Implementation:
        """ì‘ì—… êµ¬í˜„"""

        # Economic routing
        model = await self.economic_router.route_task(task)

        # Context from RAG (minimal)
        relevant_context = await self.context_bus.retrieve(
            task_id=task.id,
            max_tokens=5000  # ìµœì†Œ ì»¨í…ìŠ¤íŠ¸
        )

        # Implementation
        code = await self.generate_code(model, task, relevant_context)

        return Implementation(code=code, model_used=model)
```

---

### Phase 4: ëª¨ë‹ˆí„°ë§ ë° ê´€ì°° ê°€ëŠ¥ì„± (Week 6)

#### 4.1 KPI ëŒ€ì‹œë³´ë“œ êµ¬í˜„

**íŒŒì¼**: `routers/helios_metrics.py`

```python
from prometheus_client import Counter, Histogram, Gauge

# Metrics
token_usage = Counter(
    'helios_token_usage_total',
    'Total token usage',
    ['model', 'window']
)

project_cost = Histogram(
    'helios_project_cost_dollars',
    'Project cost in dollars'
)

task_latency = Histogram(
    'helios_task_latency_seconds',
    'Task completion latency',
    ['agent_type']
)

cache_hit_rate = Gauge(
    'helios_cache_hit_rate',
    'Cache hit rate',
    ['cache_level']
)

opus_sonnet_ratio = Gauge(
    'helios_opus_sonnet_ratio',
    'Opus to Sonnet usage ratio'
)

@router.get("/api/v1/helios/metrics")
async def get_helios_metrics():
    """Helios ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­"""

    return {
        "token_usage": {
            "total_5h_window": await get_5h_usage(),
            "opus_pct": await get_opus_percentage(),
            "sonnet_pct": await get_sonnet_percentage()
        },
        "cost": {
            "current_project": await get_current_project_cost(),
            "projected_monthly": await get_monthly_projection()
        },
        "performance": {
            "avg_task_latency": await get_avg_task_latency(),
            "cache_hit_rate": await get_cache_hit_rates()
        },
        "agent_metrics": {
            "success_rate": await get_agent_success_rates()
        }
    }
```

#### 4.2 ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ (Grafana)

**íŒŒì¼**: `infrastructure/grafana/helios_dashboard.json`

**íŒ¨ë„**:
1. **ì´ í† í° ì†Œë¹„ëŸ‰ (5ì‹œê°„ ì°½)** - Gauge
2. **í”„ë¡œì íŠ¸ë‹¹ ë¹„ìš©** - Graph over time
3. **í‰ê·  ì‘ì—… ì§€ì—° ì‹œê°„** - Bar chart by agent
4. **ìºì‹œ ì ì¤‘ë¥  (L1/L2/L3)** - Pie chart
5. **Opus ëŒ€ Sonnet ì‚¬ìš© ë¹„ìœ¨** - Pie chart
6. **ì—ì´ì „íŠ¸ ì„±ê³µ/ì‹¤íŒ¨ìœ¨** - Bar chart

---

## ğŸ“Š êµ¬í˜„ ìš°ì„ ìˆœìœ„

### High Priority (Week 1-2)
1. âœ… Resource Governor
2. âœ… Economic Router
3. âœ… Hybrid Scheduler
4. âœ… ê¸°ë³¸ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

### Medium Priority (Week 3-4)
5. âœ… Multi-layer Caching (L1/L2/L3)
6. âœ… ArchitectAgent êµ¬í˜„
7. âœ… Code AnalysisAgent êµ¬í˜„
8. âœ… í”„ë¡¬í”„íŠ¸ ì••ì¶• ëª¨ë“ˆ

### Low Priority (Week 5-6)
9. â³ ê³ ê¸‰ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
10. â³ E2E ì„±ëŠ¥ ìµœì í™”
11. â³ ë³‘ë ¬ í”„ë¡œì íŠ¸ ì‹¤í–‰ í…ŒìŠ¤íŠ¸

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ

### ëª©í‘œ KPI

| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|------|------|----------|
| **í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”** | 5ì‹œê°„ ì°½ 90% ë¯¸ë§Œ ì‚¬ìš© | Resource Governor |
| **Opus ì‚¬ìš© ë¹„ìœ¨** | 50% ë¯¸ë§Œ | Economic Router |
| **ìºì‹œ ì ì¤‘ë¥ ** | L2+L3 > 40% | Cache Service |
| **í‰ê·  ì‘ì—… ì§€ì—°** | < 30ì´ˆ | Prometheus |
| **í”„ë¡œì íŠ¸ ë¹„ìš©** | ê¸°ì¡´ ëŒ€ë¹„ 30% ì ˆê° | Cost Tracking |

### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

| ì‘ì—… | í˜„ì¬ AutoDev | Helios ëª©í‘œ |
|------|--------------|-------------|
| PRD ìƒì„± | 60ì´ˆ | 40ì´ˆ (ìºì‹±) |
| ì½”ë“œ êµ¬í˜„ | 600ì´ˆ | 450ì´ˆ (ì»¨í…ìŠ¤íŠ¸ ìµœì í™”) |
| ì½”ë“œ ë¦¬ë·° | 120ì´ˆ | 90ì´ˆ (ìºì‹±) |
| **ì „ì²´ ì›Œí¬í”Œë¡œìš°** | 1200ì´ˆ | **900ì´ˆ** |

---

## ğŸ” ë³´ì•ˆ ë° í’ˆì§ˆ

### ë³´ì•ˆ ìš”êµ¬ì‚¬í•­
- API í‚¤ íšŒì „ (ë§¤ 30ì¼)
- Secrets Manager ì‚¬ìš© (AWS Secrets Manager)
- Redis ì•”í˜¸í™” ì „ì†¡ (TLS)
- ì½”ë“œ ì‹¤í–‰ ìƒŒë“œë°•ìŠ¤ (Docker isolation)

### í’ˆì§ˆ ê²Œì´íŠ¸ (ê¸°ì¡´ ìœ ì§€)
- SonarQube ì½”ë“œ ì»¤ë²„ë¦¬ì§€ â‰¥80%
- Snyk ë³´ì•ˆ ìŠ¤ìº” (Critical/High: 0)
- ì½”ë“œ ì¤‘ë³µ <3%
- ë³´ì•ˆ ë“±ê¸‰: A

---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
phase2-agentic-system/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ orchestrator/
â”‚   â”‚   â”œâ”€â”€ resource_governor.py       # NEW
â”‚   â”‚   â”œâ”€â”€ economic_router.py         # NEW
â”‚   â”‚   â”œâ”€â”€ hybrid_scheduler.py        # NEW
â”‚   â”‚   â””â”€â”€ helios_orchestrator.py     # NEW
â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â”œâ”€â”€ multi_layer_cache.py       # NEW
â”‚   â”‚   â”œâ”€â”€ claude_prompt_cache.py     # NEW
â”‚   â”‚   â”œâ”€â”€ redis_exact_cache.py       # NEW
â”‚   â”‚   â””â”€â”€ semantic_cache.py          # NEW
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ architect_agent.py         # NEW
â”‚   â”‚   â”œâ”€â”€ code_analysis_agent.py     # NEW
â”‚   â”‚   â”œâ”€â”€ coder_agent.py             # ENHANCED
â”‚   â”‚   â””â”€â”€ reviewer_agent.py          # ENHANCED
â”‚   â””â”€â”€ optimization/
â”‚       â””â”€â”€ prompt_compressor.py       # NEW
â”œâ”€â”€ routers/
â”‚   â””â”€â”€ helios_metrics.py              # NEW
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ task_graph.py                  # NEW
â”‚   â”œâ”€â”€ budget.py                      # NEW
â”‚   â””â”€â”€ cache_models.py                # NEW
â”œâ”€â”€ infrastructure/
â”‚   â””â”€â”€ grafana/
â”‚       â””â”€â”€ helios_dashboard.json      # NEW
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_resource_governor.py      # NEW
â”‚   â”œâ”€â”€ test_economic_router.py        # NEW
â”‚   â””â”€â”€ test_caching.py                # NEW
â””â”€â”€ HELIOS_IMPLEMENTATION_PLAN.md      # THIS FILE
```

---

## ğŸš€ ë°°í¬ ì „ëµ

### ë‹¨ê³„ì  ë¡¤ì•„ì›ƒ

#### Stage 1: Canary (10% traffic)
- Resource Governor í™œì„±í™”
- ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì‹œì‘
- ëª¨ë‹ˆí„°ë§

#### Stage 2: Beta (50% traffic)
- Economic Router í™œì„±í™”
- Caching í™œì„±í™”
- ì„±ëŠ¥ ë¹„êµ ë¶„ì„

#### Stage 3: Full Production (100%)
- ëª¨ë“  Helios ê¸°ëŠ¥ í™œì„±í™”
- ê¸°ì¡´ AutoDev ì‹œìŠ¤í…œ íê¸°
- ì§€ì†ì ì¸ ìµœì í™”

---

## ğŸ“š ì°¸ê³  ìë£Œ

- **PRD**: `[KFP] Claude Max ê¸°ë°˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ ë§ˆìŠ¤í„°í”Œëœ.pdf`
- **Claude Max Docs**: https://support.claude.com/en/articles/11014257
- **Microsoft Agent Framework**: https://microsoft.github.io/autogen/
- **LLMLingua**: https://github.com/microsoft/LLMLingua
- **SonarQube AI**: https://www.sonarsource.com/products/sonarqube/

---

**ì‘ì„±ì**: Claude Opus 4.1
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-25
**ìƒíƒœ**: âœ… ì„¤ê³„ ì™„ë£Œ - êµ¬í˜„ ì¤€ë¹„ ì™„ë£Œ
